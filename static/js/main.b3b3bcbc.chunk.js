(this["webpackJsonpmovie-app"]=this["webpackJsonpmovie-app"]||[]).push([[0],{28:function(e,t,c){},41:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(6),r=c(20),i=c.n(r),o=(c(28),c.p+"static/media/TMDBlogo.da3f379f.svg"),l=c(3),d=c(5),j=c(10),h=c.n(j),b=c(0);function u(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),i=Object(d.a)(r,2),o=i[0],l=i[1];return Object(n.useEffect)((function(){fetch("https://api.themoviedb.org/3/trending/movie/week?api_key=8c20094b9d32bd14049b323d7d8294d0",{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.warn("error getting movies:",e)})).then((function(e){return a(e)}))}),[]),Object(n.useEffect)((function(){fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=8c20094b9d32bd14049b323d7d8294d0&language=en-US",{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.warn("error getting genre:",e)})).then((function(e){return l(e)}))}),[]),c&&c.results.sort((function(e,t){return e.release_date>t.release_date?-1:1})),Object(b.jsx)("div",{className:"d-flex flex-wrap justify-content-center",children:c?c.results.map((function(e,t){return Object(b.jsx)("div",{className:"card m-2 m-lg-4",children:Object(b.jsxs)(s.b,{to:{pathname:"/MoviePage",hash:"".concat(c.results[t].id),state:{id:c.results[t].id}},children:[Object(b.jsx)("img",{className:"card-img-top",src:"http://image.tmdb.org/t/p/w300/"+e.poster_path,alt:""}),Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("h5",{className:"card-title",children:e.title}),o?e.genre_ids.map((function(e,t){for(var c="",n=0;n<o.genres.length;n++)e===o.genres[n].id&&(c=o.genres[n].name);return Object(b.jsx)("span",{className:"badge bg-warning text-dark m-1",children:c},t)})):Object(b.jsx)("p",{children:"Loading..."}),Object(b.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(b.jsx)("span",{children:h()(e.release_date).format("Do MMM YYYY")}),Object(b.jsxs)("span",{children:["Rating: ",e.vote_average]})]})]})]})},t)})):Object(b.jsx)("div",{children:"Loading..."})})}function m(){return Object(b.jsx)("header",{children:Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:Object(b.jsx)(s.b,{to:"Latest",children:"Latest"})}),Object(b.jsx)("li",{children:Object(b.jsx)(s.b,{to:"Search",children:"Search"})}),Object(b.jsx)("li",{children:Object(b.jsx)(s.b,{to:"watchList",children:"Watch List"})})]})})}var g=c(22),f=c(17);function p(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),i=Object(d.a)(r,2),o=i[0],l=i[1],j=Object(n.useState)(!1),u=Object(d.a)(j,2),m=u[0],p=u[1],O=Object(n.useState)(!1),x=Object(d.a)(O,2),v=x[0],w=x[1];return Object(n.useEffect)((function(){fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=8c20094b9d32bd14049b323d7d8294d0&language=en-US",{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.warn("error getting genre:",e)})).then((function(e){return w(e)}))}),[]),Object(n.useEffect)((function(){fetch("https://api.themoviedb.org/3/search/movie?api_key=8c20094b9d32bd14049b323d7d8294d0&language=en-US&page=1&include_adult=false&query="+m).then((function(e){return e.json()})).catch((function(e){return console.warn("error getting movies:",e)})).then((function(e){return a(e)}))}),[m]),Object(n.useEffect)((function(){setTimeout((function(){m&&l(!0)}),200)}),[m]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"searchWrap",children:[Object(b.jsx)("input",{type:"text",placeholder:"Search"}),Object(b.jsx)("button",{onClick:function(){return p(document.querySelector("input").value)},children:Object(b.jsx)(g.a,{icon:f.a})})]}),Object(b.jsx)("div",{className:"d-flex flex-wrap justify-content-center",style:{minHeight:"65vh"},children:o?c.results.map((function(e,t){return Object(b.jsx)("div",{className:"card m-2 m-lg-4",children:Object(b.jsxs)(s.b,{to:{pathname:"/MoviePage",hash:"".concat(c.results[t].id),state:{id:c.results[t].id}},children:[Object(b.jsx)("img",{className:"card-img-top",src:"http://image.tmdb.org/t/p/w300/"+e.poster_path,alt:""}),Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("h5",{className:"card-title",children:e.title}),v?e.genre_ids.map((function(e,t){for(var c="",n=0;n<v.genres.length;n++)e===v.genres[n].id&&(c=v.genres[n].name);return Object(b.jsx)("span",{className:"badge bg-warning text-dark m-1",children:c},t)})):Object(b.jsx)("p",{children:"Loading..."}),Object(b.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(b.jsx)("span",{children:h()(e.release_date).format("Do MMM YYYY")}),Object(b.jsxs)("span",{children:["Rating: ",e.vote_average]})]})]})]})},t)})):Object(b.jsx)("div",{})})]})}var O=c(23);function x(e){var t=Object(n.useState)(!1),c=Object(d.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(!1),i=Object(d.a)(r,2),o=i[0],l=i[1],j=Object(n.useState)(!1),u=Object(d.a)(j,2),m=u[0],g=u[1];return Object(n.useEffect)((function(){fetch("https://api.themoviedb.org/3/movie/".concat(e.location.hash.slice(1),"?api_key=8c20094b9d32bd14049b323d7d8294d0&language=en-US")).then((function(e){return e.json()})).catch((function(e){return console.warn("error getting movie:",e)})).then((function(e){return s(e)}))}),[e.location.hash]),Object(n.useEffect)((function(){fetch("https://api.themoviedb.org/3/movie/".concat(e.location.hash.slice(1),"/credits?api_key=8c20094b9d32bd14049b323d7d8294d0&language=en-US")).then((function(e){return e.json()})).catch((function(e){return console.warn("error getting credits:",e)})).then((function(e){return l(e)}))}),[e.location.hash]),Object(n.useEffect)((function(){fetch(" https://api.themoviedb.org/3/authentication/guest_session/new?api_key=8c20094b9d32bd14049b323d7d8294d0").then((function(e){return e.json()})).catch((function(e){return console.warn("error getting guestID:",e)})).then((function(e){return g(e)}))}),[e.location.hash]),console.log("guestID",m),o&&o.cast.sort((function(e,t){return null===e.profile_path&&"null"!==t.profile_path?1:"null"!==e.profile_path&&null===t.profile_path?-1:0})),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"movieContainer",children:[Object(b.jsx)("h1",{children:a.title}),Object(b.jsx)("h2",{children:a.tagline}),Object(b.jsx)("img",{className:"large",src:"http://image.tmdb.org/t/p/w780/"+a.backdrop_path,alt:""}),Object(b.jsx)("div",{className:"d-flex justify-content-around",children:a?a.genres.map((function(e,t){return Object(b.jsx)("span",{className:"badge bg-warning text-dark m-1",children:e.name},t)})):Object(b.jsx)("p",{children:"Loading genres..."})}),Object(b.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(b.jsxs)("span",{children:["Release date: ",h()(a.release_date).format("Do MMMM YYYY")]}),Object(b.jsxs)("span",{children:["Rating: ",a.vote_average]})]}),Object(b.jsx)("p",{children:a.overview}),Object(b.jsx)("button",{className:"btn btn-success",onClick:function(){return function(e){var t=[];if(null!=localStorage.getItem("watchList")){t=JSON.parse(localStorage.getItem("watchList"));var c,n=Object(O.a)(t);try{for(n.s();!(c=n.n()).done;)if(c.value.title===e.title)return}catch(a){n.e(a)}finally{n.f()}}t.push(e),localStorage.setItem("watchList",JSON.stringify(t))}(a)},children:"+ Add to watch list"}),Object(b.jsxs)("div",{className:"ratingContainer",children:[Object(b.jsx)("input",{type:"number",placeholder:"Rating",min:"0.5",max:"10"}),Object(b.jsx)("button",{className:"btn btn-light",onClick:function(){return function(e,t,c){c<.5||c>10?alert("Rating must be between 0.5 and 10"):fetch("https://api.themoviedb.org/3/movie/".concat(e,"/rating?").concat(c,"api_key=8c20094b9d32bd14049b323d7d8294d0&guest_session_id=").concat(t),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({value:c})}).then((function(e){return 401===e.status&&console.warn(e.statusText),e.json()})).catch((function(e){return console.warn("error getting guestID:",e)})).then((function(e){return console.log("Success:",e)})),console.log(e,t,c)}(a.id,m,document.querySelector("input").value)},children:"Rate Movie"})]})]}),Object(b.jsx)("div",{className:"peopleContainer d-flex flex-wrap justify-content-center",children:o?o.cast.map((function(e,t){return Object(b.jsxs)("div",{className:"person-card m-2 m-lg-4 d-flex flex-column",children:[Object(b.jsx)("img",{className:"card-img-top",src:"http://image.tmdb.org/t/p/w300/"+e.profile_path,alt:""}),Object(b.jsx)("div",{className:"card-body",children:Object(b.jsx)("h5",{className:"card-title",children:e.name})})]},t)})):Object(b.jsx)("p",{children:"Loading cast..."})})]})}function v(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!0),i=Object(d.a)(r,2),o=i[0],l=i[1],j=Object(n.useState)(!1),u=Object(d.a)(j,2),m=u[0],g=u[1],f=JSON.parse(localStorage.getItem("watchList"));return Object(n.useEffect)((function(){localStorage.getItem("watchList")&&(a(JSON.parse(localStorage.getItem("watchList"))),l(!1))}),[]),Object(n.useEffect)((function(){a(f)}),[m]),Object(b.jsx)("div",{className:"d-flex flex-wrap justify-content-center",children:o?Object(b.jsx)("p",{children:"Your watch list is empty."}):c?c.map((function(e,t){return Object(b.jsxs)("div",{className:"m-2 m-lg-4",children:[Object(b.jsx)("div",{className:"card",children:Object(b.jsxs)(s.b,{to:{pathname:"/MoviePage",hash:"".concat(c[t].id),state:{id:c[t].id}},children:[Object(b.jsx)("img",{className:"card-img-top",src:"http://image.tmdb.org/t/p/w300/"+e.poster_path,alt:""}),Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("h5",{className:"card-title",children:e.title}),e.genres.map((function(e,t){return Object(b.jsx)("span",{className:"badge bg-warning text-dark m-1",children:e.name},t)})),Object(b.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(b.jsx)("span",{children:h()(e.release_date).format("Do MMM YYYY")}),Object(b.jsxs)("span",{children:["Rating: ",e.vote_average]})]})]})]})},t),Object(b.jsx)("button",{className:t+" btn btn-danger",onClick:function(e){return function(e){var t=e.className.split(" ");f.splice(t[0],1),0===f.length&&l(!0),localStorage.setItem("watchList",JSON.stringify(f)),g(f.length)}(e.target)},children:"Remove from watch list"})]})})):Object(b.jsx)("div",{children:"Loading..."})})}var w=function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(m,{}),Object(b.jsxs)(l.d,{children:[Object(b.jsx)(l.b,{path:"/Latest",component:u}),Object(b.jsx)(l.b,{path:"/Search",component:p}),Object(b.jsx)(l.b,{path:"/MoviePage",component:x}),Object(b.jsx)(l.b,{path:"/watchList",component:v}),Object(b.jsx)(l.b,{path:"*",children:Object(b.jsx)(l.a,{to:"/Latest"})})]}),Object(b.jsxs)("footer",{children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:"Powered by:"}),Object(b.jsx)("img",{src:o,alt:"logo"})]}),Object(b.jsx)("div",{children:Object(b.jsxs)("p",{children:["Favicon made by ",Object(b.jsx)("a",{href:"https://www.freepik.com",title:"Freepik",children:"Freepik"})," from ",Object(b.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]})})]})]})};i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(s.a,{children:Object(b.jsx)(w,{})})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.b3b3bcbc.chunk.js.map