(this["webpackJsonpmovie-app"]=this["webpackJsonpmovie-app"]||[]).push([[0],{28:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(6),r=n(19),i=n.n(r),o=(n(28),n.p+"static/media/TMDBlogo.da3f379f.svg"),l=n(3),d=n(5),j=n(10),b=n.n(j),h=n(0);function u(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),i=Object(d.a)(r,2),o=i[0],l=i[1];return Object(c.useEffect)((function(){fetch("https://api.themoviedb.org/3/trending/movie/week?api_key=8c20094b9d32bd14049b323d7d8294d0",{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.warn("error getting movies:",e)})).then((function(e){return a(e)}))}),[]),Object(c.useEffect)((function(){fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=8c20094b9d32bd14049b323d7d8294d0&language=en-US",{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.warn("error getting genre:",e)})).then((function(e){return l(e)}))}),[]),n&&n.results.sort((function(e,t){return e.release_date>t.release_date?-1:1})),Object(h.jsx)("div",{className:"d-flex flex-wrap justify-content-center",children:n?n.results.map((function(e,t){return Object(h.jsx)("div",{className:"card m-2 m-lg-4",children:Object(h.jsxs)(s.b,{to:{pathname:"/MoviePage",hash:"".concat(n.results[t].id),state:{id:n.results[t].id}},children:[Object(h.jsx)("img",{className:"card-img-top",src:"http://image.tmdb.org/t/p/w300/"+e.poster_path,alt:""}),Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsx)("h5",{className:"card-title",children:e.title}),o?e.genre_ids.map((function(e,t){for(var n="",c=0;c<o.genres.length;c++)e===o.genres[c].id&&(n=o.genres[c].name);return Object(h.jsx)("span",{className:"badge bg-warning text-dark m-1",children:n},t)})):Object(h.jsx)("p",{children:"Loading..."}),Object(h.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(h.jsx)("span",{children:b()(e.release_date).format("Do MMM YYYY")}),Object(h.jsxs)("span",{children:["Rating: ",e.vote_average]})]})]})]})},t)})):Object(h.jsx)("div",{children:"Loading..."})})}function g(){return Object(h.jsx)("header",{children:Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{children:Object(h.jsx)(s.b,{to:"Latest",children:"Latest"})}),Object(h.jsx)("li",{children:Object(h.jsx)(s.b,{to:"Search",children:"Search"})}),Object(h.jsx)("li",{children:Object(h.jsx)(s.b,{to:"watchList",children:"Watch List"})})]})})}var m=n(21),f=n(22);function O(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),i=Object(d.a)(r,2),o=i[0],l=i[1],j=Object(c.useState)(!1),u=Object(d.a)(j,2),g=u[0],O=u[1],p=Object(c.useState)(!1),x=Object(d.a)(p,2),v=x[0],w=x[1],N=Object(c.useState)(1),y=Object(d.a)(N,2),S=y[0],_=y[1];return Object(c.useEffect)((function(){fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=8c20094b9d32bd14049b323d7d8294d0&language=en-US",{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.warn("error getting genre:",e)})).then((function(e){return w(e)}))}),[]),Object(c.useEffect)((function(){fetch("https://api.themoviedb.org/3/search/movie?api_key=8c20094b9d32bd14049b323d7d8294d0&language=en-US&page=".concat(S,"&include_adult=false&query=")+g).then((function(e){return e.json()})).catch((function(e){return console.warn("error getting movies:",e)})).then((function(e){console.log(e),a(e)}))}),[g,S]),Object(c.useEffect)((function(){setTimeout((function(){g&&l(!0)}),200)}),[g]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"searchWrap",children:[Object(h.jsx)("input",{type:"text",placeholder:"Search"}),Object(h.jsx)("button",{onClick:function(){return O(document.querySelector("input").value)},children:Object(h.jsx)(m.a,{icon:f.a})})]}),o?Object(h.jsxs)("div",{className:"pages d-flex flex-row justify-content-between mx-md-5 my-2 my-md-0",children:[1===S?Object(h.jsx)("button",{disabled:!0,children:"Previous Page"}):Object(h.jsx)("button",{onClick:function(){return _(S-1)},children:"Previous Page"}),S===n.total_pages?Object(h.jsx)("button",{disabled:!0,children:"Next Page"}):Object(h.jsx)("button",{onClick:function(){return _(S+1)},children:"Next Page"})]}):Object(h.jsx)(h.Fragment,{}),Object(h.jsx)("div",{className:"d-flex flex-wrap justify-content-center",style:{minHeight:"65vh"},children:o?n.results.map((function(e,t){return Object(h.jsx)("div",{className:"card m-2 m-lg-4",children:Object(h.jsxs)(s.b,{to:{pathname:"/MoviePage",hash:"".concat(n.results[t].id),state:{id:n.results[t].id}},children:[Object(h.jsx)("img",{className:"card-img-top",src:"http://image.tmdb.org/t/p/w300/"+e.poster_path,alt:""}),Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsx)("h5",{className:"card-title",children:e.title}),v?e.genre_ids.map((function(e,t){for(var n="",c=0;c<v.genres.length;c++)e===v.genres[c].id&&(n=v.genres[c].name);return Object(h.jsx)("span",{className:"badge bg-warning text-dark m-1",children:n},t)})):Object(h.jsx)("p",{children:"Loading..."}),Object(h.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(h.jsx)("span",{children:b()(e.release_date).format("Do MMM YYYY")}),Object(h.jsxs)("span",{children:["Rating: ",e.vote_average]})]})]})]})},t)})):Object(h.jsx)("div",{})})]})}var p=n(23);function x(e){var t=Object(c.useState)(!1),n=Object(d.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(!1),i=Object(d.a)(r,2),o=i[0],l=i[1],j=Object(c.useState)(!1),u=Object(d.a)(j,2),g=u[0],m=u[1];return Object(c.useEffect)((function(){fetch("https://api.themoviedb.org/3/movie/".concat(e.location.hash.slice(1),"?api_key=8c20094b9d32bd14049b323d7d8294d0&language=en-US")).then((function(e){return e.json()})).catch((function(e){return console.warn("error getting movie:",e)})).then((function(e){return s(e)}))}),[e.location.hash]),Object(c.useEffect)((function(){fetch("https://api.themoviedb.org/3/movie/".concat(e.location.hash.slice(1),"/credits?api_key=8c20094b9d32bd14049b323d7d8294d0&language=en-US")).then((function(e){return e.json()})).catch((function(e){return console.warn("error getting credits:",e)})).then((function(e){return l(e)}))}),[e.location.hash]),Object(c.useEffect)((function(){fetch(" https://api.themoviedb.org/3/authentication/guest_session/new?api_key=8c20094b9d32bd14049b323d7d8294d0").then((function(e){return e.json()})).catch((function(e){return console.warn("error getting guestID:",e)})).then((function(e){return m(e)}))}),[e.location.hash]),console.log("guestID",g.guest_session_id),o&&o.cast.sort((function(e,t){return null===e.profile_path&&"null"!==t.profile_path?1:"null"!==e.profile_path&&null===t.profile_path?-1:0})),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"movieContainer",children:[Object(h.jsx)("h1",{children:a.title}),Object(h.jsx)("h2",{children:a.tagline}),Object(h.jsx)("img",{className:"large",src:"http://image.tmdb.org/t/p/w780/"+a.backdrop_path,alt:""}),Object(h.jsx)("div",{className:"d-flex justify-content-around",children:a?a.genres.map((function(e,t){return Object(h.jsx)("span",{className:"badge bg-warning text-dark m-1",children:e.name},t)})):Object(h.jsx)("p",{children:"Loading genres..."})}),Object(h.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(h.jsxs)("span",{children:["Release date: ",b()(a.release_date).format("Do MMMM YYYY")]}),Object(h.jsxs)("span",{children:["Rating: ",a.vote_average]})]}),Object(h.jsx)("p",{children:a.overview}),Object(h.jsx)("button",{className:"btn btn-success",onClick:function(){return function(e){var t=[];if(null!=localStorage.getItem("watchList")){t=JSON.parse(localStorage.getItem("watchList"));var n,c=Object(p.a)(t);try{for(c.s();!(n=c.n()).done;)if(n.value.title===e.title)return}catch(a){c.e(a)}finally{c.f()}}t.push(e),localStorage.setItem("watchList",JSON.stringify(t))}(a)},children:"+ Add to watch list"}),Object(h.jsxs)("div",{className:"ratingContainer",children:[Object(h.jsx)("input",{type:"number",placeholder:"Rating",min:"0.5",max:"10"}),Object(h.jsx)("button",{className:"btn btn-light",onClick:function(){return function(e,t,n){n<.5||n>10?alert("Rating must be between 0.5 and 10"):fetch("https://api.themoviedb.org/3/movie/".concat(e,"/rating?").concat(n,"api_key=8c20094b9d32bd14049b323d7d8294d0&guest_session_id=").concat(t.guest_session_id),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({value:n})}).then((function(e){return 401===e.status&&console.warn(e.statusText),e.json()})).catch((function(e){return console.warn("error getting guestID:",e)})).then((function(e){return console.log("Success:",e)}))}(a.id,g,document.querySelector("input").value)},children:"Rate Movie"})]})]}),Object(h.jsx)("div",{className:"peopleContainer d-flex flex-wrap justify-content-center",children:o?o.cast.map((function(e,t){return Object(h.jsxs)("div",{className:"person-card m-2 m-lg-4 d-flex flex-column",children:[Object(h.jsx)("img",{className:"card-img-top",src:"http://image.tmdb.org/t/p/w300/"+e.profile_path,alt:""}),Object(h.jsx)("div",{className:"card-body",children:Object(h.jsx)("h5",{className:"card-title",children:e.name})})]},t)})):Object(h.jsx)("p",{children:"Loading cast..."})})]})}function v(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!0),i=Object(d.a)(r,2),o=i[0],l=i[1],j=Object(c.useState)(!1),u=Object(d.a)(j,2),g=u[0],m=u[1],f=JSON.parse(localStorage.getItem("watchList"));return Object(c.useEffect)((function(){localStorage.getItem("watchList")&&(a(JSON.parse(localStorage.getItem("watchList"))),l(!1))}),[]),Object(c.useEffect)((function(){a(f)}),[g]),Object(h.jsx)("div",{className:"d-flex flex-wrap justify-content-center",children:o?Object(h.jsx)("p",{children:"Your watch list is empty."}):n?n.map((function(e,t){return Object(h.jsxs)("div",{className:"m-2 m-lg-4",children:[Object(h.jsx)("div",{className:"card",children:Object(h.jsxs)(s.b,{to:{pathname:"/MoviePage",hash:"".concat(n[t].id),state:{id:n[t].id}},children:[Object(h.jsx)("img",{className:"card-img-top",src:"http://image.tmdb.org/t/p/w300/"+e.poster_path,alt:""}),Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsx)("h5",{className:"card-title",children:e.title}),e.genres.map((function(e,t){return Object(h.jsx)("span",{className:"badge bg-warning text-dark m-1",children:e.name},t)})),Object(h.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(h.jsx)("span",{children:b()(e.release_date).format("Do MMM YYYY")}),Object(h.jsxs)("span",{children:["Rating: ",e.vote_average]})]})]})]})},t),Object(h.jsx)("button",{className:t+" btn btn-danger",onClick:function(e){return function(e){var t=e.className.split(" ");f.splice(t[0],1),0===f.length&&l(!0),localStorage.setItem("watchList",JSON.stringify(f)),m(f.length)}(e.target)},children:"Remove from watch list"})]})})):Object(h.jsx)("div",{children:"Loading..."})})}var w=function(){return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(g,{}),Object(h.jsxs)(l.d,{children:[Object(h.jsx)(l.b,{path:"/Latest",component:u}),Object(h.jsx)(l.b,{path:"/Search",component:O}),Object(h.jsx)(l.b,{path:"/MoviePage",component:x}),Object(h.jsx)(l.b,{path:"/watchList",component:v}),Object(h.jsx)(l.b,{path:"*",children:Object(h.jsx)(l.a,{to:"/Latest"})})]}),Object(h.jsxs)("footer",{children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("p",{children:"Powered by:"}),Object(h.jsx)("img",{src:o,alt:"logo"})]}),Object(h.jsx)("div",{children:Object(h.jsxs)("p",{children:["Favicon made by ",Object(h.jsx)("a",{href:"https://www.freepik.com",title:"Freepik",children:"Freepik"})," from ",Object(h.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]})})]})]})};i.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(s.a,{children:Object(h.jsx)(w,{})})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.da68897b.chunk.js.map